{"version":3,"sources":["../src/cacheHelper.js"],"names":["clear","reset","require","expectRequire","e","mod","unloadLastChildOf","clearRequireCache","clearAMockCache","lastIndex","children","length","splice","prop","cache","match"],"mappings":";;;;;QAKgBA,K,GAAAA,K;AALhB,IAAIC,cAAJ;AACA,IAAI;AACAA,YAAQC,QAAQ,QAAR,EAAkBC,aAAlB,CAAgCF,KAAxC;AACH,CAFD,CAEE,OAAOG,CAAP,EAAU,CAAE;;AAEP,SAASJ,KAAT,CAAeK,GAAf,EAAoB;AACvBC,sBAAkBD,GAAlB;AACAE;AACAC;AACH;;AAED,SAASF,iBAAT,CAA2BD,GAA3B,EAAgC;AAC5B,QAAII,YAAYJ,IAAIK,QAAJ,CAAaC,MAAb,GAAsB,CAAtC;AACAN,QAAIK,QAAJ,CAAaE,MAAb,CAAoBH,SAApB,EAA+B,CAA/B;AACH;;AAED,SAASF,iBAAT,GAA6B;AACzB,SAAK,IAAIM,IAAT,IAAiBX,QAAQY,KAAzB,EAAgC;AAC5B,YAAID,KAAKE,KAAL,CAAW,SAAX,KAAyBF,KAAKE,KAAL,CAAW,OAAX,CAA7B,EACI;AACJ,eAAOb,QAAQY,KAAR,CAAcD,IAAd,CAAP;AACH;AACJ;;AAED,SAASL,eAAT,GAA2B;AACvB,QAAIP,KAAJ,EAAW;AACPA;AACH;AACJ","file":"cacheHelper.js","sourcesContent":["let reset;\ntry {\n    reset = require('a_mock').expectRequire.reset;\n} catch (e) {}\n\nexport function clear(mod) {\n    unloadLastChildOf(mod);\n    clearRequireCache();\n    clearAMockCache();\n}\n\nfunction unloadLastChildOf(mod) {\n    var lastIndex = mod.children.length - 1;\n    mod.children.splice(lastIndex, 1);\n}\n\nfunction clearRequireCache() {\n    for (var prop in require.cache) {\n        if (prop.match(/\\.node$/) || prop.match(/babel/))\n            continue;\n        delete require.cache[prop];\n    }\n}\n\nfunction clearAMockCache() {\n    if (reset) {\n        reset();\n    }\n}\n"]}